<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta charset="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Phenomenail | Online Salon Booking Platform</title>
  <link rel="stylesheet" type="text/css" href="./scripts/css/style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

</head>

<body>
  <div class="header">
    <div class="container">
      <div class="navbar">
        <div class="logo">
          <a href="index.html"><img src="assets/logo.png" width="300 px" /></a>
        </div>
        <nav>
          <ul id="MenuItems">
            <li><a href="index.html">Home</a></li>
            <li><a href="/admin">Admin</a></li>
            <li><a href="/profile">Profile</a></li>
            <li><a href="/account">Account</a></li>
          </ul>
        </nav>



        <img src="images/menu.png" class="menu-icon" onclick="menutoggle()" />
      </div>
      <div class="row">
        <div class="col-2">
          <h1>Give Your Nails<br />A New Style!</h1>
          <p>
            Beauty is not always about money, its also about creativity and
            design <br />Join us and find out!
          </p>
        </div>
        <div class="col-2">
          <img src="/images/image1.jpg" width="300" height="300" />
        </div>
      </div>
    </div>
  </div>
  <div id="map"></div>
  <div class="container hide" id="booking-form-container">
    <header>Appointment Booking</header>

    <form action="#" id="booking-form">
      <input type="text" id="booking-salon" hidden>
      <input type="text" id="booking-salon-email" hidden>
      <div class="fields">
        <div class="input-field">
          <label>Full Name</label>
          <input type="text" placeholder="Enter your name" id="booking-fullname" required>
        </div>
        <div class="input-field">
          <label>Email</label>
          <input type="text" placeholder="Enter your email" id="booking-email" required>
        </div>
        <div class="form-group">
          <label for="service">Service: </label>
          <select name="service" id="service-selector" class="form-control">
          </select>
        </div>
        <div class="input-field">
          <label>Date of Appointment</label>
          <input type="date" placeholder="Enter appointment date" id="booking-date" required>
        </div>

        <div class="input-field">
          <label>Mobile Number</label>
          <input type="tel" placeholder="Enter mobile number" id="booking-mobile" required>
        </div>
        <div class="form-group">
          <label for="payment-method">Payment Method</label>
          <select name="payment-method" id="payment-method" class="form-control">
            <option disabled selected value>-- Select Payment --</option>
            <option value="mpesa">Mpesa</option>
            <option value="card">Card</option>
          </select>
        </div>
        <div class="input-field">
          <label>Time</label>
          <input type="time" min="08:00" max="17:00" placeholder="Enter time of appointment" id="booking-time" required>
        </div>
      </div>
      <!-- <input type="button" value="1"> -->
      <div class="d-flex" style="display: flex; justify-content:center;">
        <a href="" class="btn" id="proceedBtn">Proceed</a> <a href="" class="btn bg-purpleish" id="alreadyPaid">Already
          Paid</a>
      </div>
    </form>
  </div>


  <!-- featured categories -->
  <div class="categories">
    <div class="small-container">
      <div class="row">
        <div class="col-3">
          <img src="images/category-1.jpg" />
        </div>
        <div class="col-3">
          <img src="images/category-2.jpg" />
        </div>
        <div class="col-3">
          <img src="images/category-3.jpg" />
        </div>
      </div>
    </div>
  </div>

  <div>
    <div class="fa-text-width">
      <div class="row">
        <p>
          Phenomenail is an online booking system used to book nail
          appointments. We connect nail artists, and similar merchants with
          their clients.
        </p>
        <p>Join us now and discover nail artists near you!</p>
      </div>
    </div>
  </div>

  <!-- <section id="section1">
                <script>
                    marker.addListener('mouseover', function() {
                        infowindow.open(map, this);
                    });

                    // assuming you also want to hide the infowindow when user mouses-out
                    marker.addListener('mouseout', function() {
                        infowindow.close();
                    });
                </script>
            </section> -->

  <!-- footer -->
  <div class="footer">
    <div class="container">
      <div class="row">
        <div class="footer-col-1">
          <h3>Download Our App</h3>
          <p>Download App for Android and ios mobile phone.</p>
          <div class="app-logo">
            <img src="images/play-store.png">
            <img src="images/app-store.png">

          </div>
        </div>
        <div class="footer-col-2">
          <img src="images/footerlogo.jpg">
          <p>Our Purpose Is To Bring a New Modern Style to the Nails business affordably!</p>
        </div>


      </div>
    </div>

  </div>
  <hr />
  </div>
  </div>
  <div class="modal container hide" id="view-account-modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close-modal" data-dismiss="modal" data-target="#view-account-modal" onClick="toggleModal()"
          oncontextmenu="event.preventDefault();">
          x
        </button>
        <h2 class="modal-title">Make Booking</h2>
      </div>

      <div class="modal-body">
        <form action="" onsubmit="makePayment">
          <div class="form-group">
            <label for="name">Name: </label>
            <input type="text" class="form-control" name="name" />
          </div>
          <div class="form-group">
            <label for="email">Email: </label>
            <input type="email" name="email" id="email" />
          </div>
          <div class="form-group">
            <label for="date">Date: </label>
            <input type="date" name="appointment-date" id="appointment-date" />
          </div>
          <div class="form-group">
            <button class="btn" type="submit" onclick="makePayment()">
              Proceed To Payment
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- <div class="modal container fade" id="book-modal">
      <div class="modal-content">
         <div class="modal-header">
          <button
            class="close-modal"
            data-dismiss="modal"
            data-target="#book-modal"
            onClick="toggleModal(event)"
            
          >
            x
          </button>
          <h2 class="modal-title">Appointment Booking</h2>
        </div>

        <form action="#" id="form1">
            <div class="fields">
                <div class="form-group input-field">
                    <label>Full Name</label>
                    <input type="text" placeholder="Enter your name" id="booking-fullname" required>
                </div>
                <div class="input-field">
                    <label>Email</label>
                    <input type="text" placeholder="Enter your email" id="booking-email" required>
                </div>
                <div class="form-group">
                  <label for="service">Service: </label>
                  <select name="service" id="service-selector" class="form-control">     
                  </select>
                </div>
                <div class="input-field">
                    <label>Date of Appointment</label>
                    <input type="date" placeholder="Enter appointment date" id="booking-date" required>
                </div>

                <div class="input-field">
                    <label>Mobile Number</label>
                    <input type="tel" placeholder="Enter mobile number" id="booking-mobile" required>
                </div>
                <div class="form-group">
                  <label for="payment-method">Payment Method</label>
                  <select name="payment-method" id="payment-method" class="form-control">
                    <option disabled selected value>-- Select Payment --</option>
                    <option value="mpesa">Mpesa</option>
                    <option value="card">Card</option>
                  </select>
                </div>
                <div class="input-field">
                    <label>Time</label>
                    <input type="time" placeholder="Enter time of appointment" id="booking-time" required>
                </div>
            </div>
            <div class="d-flex" style="display: flex; justify-content:center;">
            <a href="" class="btn" id="proceedBtn">Proceed</a>  <a href="" class="btn bg-purpleish" id="alreadyPaid">Already Paid</a>
            </div>
        </form>

      </div>
      </div> -->

  <script src="/scripts/js/apiCalls.js"></script>
  <script src="./scripts/js/utilityFunctions.js"></script>
  <script src="/scripts/js/maps.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCqiqIAaO0myc-5iOvINoYFZvmZLXDWsuU&callback=initMap&v=weekly">
  </script>
  <!-- js for toggle menu -->
  <script>
    document.getElementById("service-selector").innerHTML = Object.keys(
      pricing
    ).reduce((_initial, _key) => {
      return (
        _initial + `<option value=${_key}>${_key} - ${pricing[_key]})</option>`
      );
    }, `<option disabled selected value>-- Select Service --</option>`);
    const form = document.querySelector("form")

    allInput = form.querySelectorAll(".first input");
    proceedBtn.addEventListener("click", (event) => {
      event.preventDefault();
      const _booking = {
        salon: {
          name: document.getElementById("booking-salon").value,
          email: document.getElementById("booking-salon-email").value
        },
        client: {
          fullname: document.getElementById("booking-fullname").value,
          email: document.getElementById("booking-email").value
        },
        appointment: {
          date: document.getElementById("booking-date").value,
          time: document.getElementById("booking-time").value,
          service: document.getElementById("service-selector").value,
          pricing: pricing[document.getElementById("service-selector").value],
          paymentMethod: document.getElementById("payment-method").value,
        }

      }

      console.log("sssss: ", (_booking))
      if (verifyBooking(_booking)) {

        makePayment(_booking).then(_data => {
          let targetModal = document.getElementById("booking-form-container");
          targetModal.classList.toggle("hide");
          console.log("ss: ", _data)
          window.open(_data.redirectUrl, "_self");
        })
      }
      form.classList.remove('secActive');
    });

    document.getElementById("alreadyPaid").addEventListener("click", (event) => {
      event.preventDefault();
      const _booking = {
        salon: {
          name: document.getElementById("booking-fullname").value,
        },
        client: {
          fullname: document.getElementById("booking-fullname").value,
          email: document.getElementById("booking-email").value
        },
        appointment: {
          date: document.getElementById("booking-date").value,
          time: document.getElementById("booking-time").value,
          service: document.getElementById("service-selector").value,
          pricing: pricing[document.getElementById("service-selector").value],
          paymentMethod: document.getElementById("payment-method").value,
        }

      }

      if (verifyBooking(_booking)) {
        console.log(_booking)
        alreadyPaid(_booking).then(_data => {
          console.log("ss: ", _data)

        })
      }
    })
  </script>
</body>

</html>